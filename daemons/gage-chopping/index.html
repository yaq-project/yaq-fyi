<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" name="viewport" content="width=80ch">
  <title>gage-chopping</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<h1>
<a href=../../>yaq</a>/<a href=../>daemons</a>/gage-chopping
</h1>

<hr>

yaq daemon supporting GaGe CompuScope Digitizer Models.
For chopping.



<h2 id='external links'>external links<a href='#external links'> ¶</a></h2>
<p class="tab30">

  <a href=https://github.com/yaq-project/yaqd-gage/issues>bugtracker</a> <br>

  <a href=https://github.com/yaq-project/yaqd-gage>source</a> <br>




<h2 id='installation'>installation<a href='#installation'> ¶</a></h2>
<p>
  The gage-chopping daemon can be installed using the following package managers:
</p>
<p class="tab30">

  <a href=https://pypi.org/project/yaqd-gage>PyPI</a> <br>




<h2 id='traits'>traits<a href='#traits'> ¶</a></h2>
<p>
  The gage-chopping daemon is <a href="https://en.wikipedia.org/wiki/Composition_over_inheritance">composed</a> of the following traits:
</p>
<p class="tab30">

  <a href=../../traits/has-measure-trigger>has-measure-trigger</a>
  <br>

  <a href=../../traits/is-daemon>is-daemon</a>
  <br>

  <a href=../../traits/is-sensor>is-sensor</a>
  <br>

</p>



<h2>hardware</h2>
<p>
  The gage-chopping daemon has been tested with the following hardware:
</p>
<p class="tab30">

  
  <a href="../../hardware/gage">gage</a>/<a href="../../hardware/gage/cse8442">cse8442</a><br>

</p>



<h2 id='configuration'>configuration<a href='#configuration'> ¶</a></h2>

  
    <p class="tab30">
    <b>channels</b> (array)
    <i>default: []</i>
    <br>
    
    
    
    </p>
    

  
    <p class="tab30">
    <b>depth</b> (int)
    <i>default: 240</i>
    <br>
     Post-trigger depth, in samples. <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>enable</b> (boolean)
    <i>default: True</i>
    <br>
     Disable this daemon. The kind entry-point will not attempt to start this daemon. <br> 
    
      <i>from <a href='../../traits/is-daemon'>is-daemon</a></i>
    
    
    </p>
    

  
    <p class="tab30">
    <b>ext_clk</b> (boolean)
    <i>default: False</i>
    <br>
     Enable or disable external clocking functionality. If external clocking is activated, the sample rate must be set to the external clocking frequency. Not all CompuScope hardware supports external clocking. <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>log_level</b> ({'name': 'level', 'symbols': ['debug', 'info', 'notice', 'warning', 'error', 'critical', 'alert', 'emergency'], 'type': 'enum'})
    <i>default: info</i>
    <br>
     Set daemon log-level. <br> 
    
      <i>from <a href='../../traits/is-daemon'>is-daemon</a></i>
    
    
    </p>
    

  
    <p class="tab30">
    <b>log_to_file</b> (boolean)
    <i>default: False</i>
    <br>
     Optionally force logging to a file. <br> 
    
      <i>from <a href='../../traits/is-daemon'>is-daemon</a></i>
    
    
    </p>
    

  
    <p class="tab30">
    <b>loop_at_startup</b> (boolean)
    <i>default: False</i>
    <br>
     If set to true, the daemon will begin to loop measure as soon as it starts. <br> 
    
      <i>from <a href='../../traits/has-measure-trigger'>has-measure-trigger</a></i>
    
    
    </p>
    

  
    <p class="tab30">
    <b>make</b> (['null', 'string'])
    <i>default: None</i>
    <br>
    
    
      <i>from <a href='../../traits/is-daemon'>is-daemon</a></i>
    
    
    </p>
    

  
    <p class="tab30">
    <b>mode</b> (int)
    <i>default: 1073741828</i>
    <br>
     Sets the operating mode of the CompuScope system. Refer to the CompuScope documentation for valid values. Default is 1073741825 for FirmWare Averaging <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>model</b> (['null', 'string'])
    <i>default: None</i>
    <br>
    
    
      <i>from <a href='../../traits/is-daemon'>is-daemon</a></i>
    
    
    </p>
    

  
    <p class="tab30">
    <b>port</b> (int)
    
    <br>
     TCP port for daemon to occupy. <br> 
    
      <i>from <a href='../../traits/is-daemon'>is-daemon</a></i>
    
    
    </p>
    

  
    <p class="tab30">
    <b>sample_rate</b> (['null', 'int'])
    <i>default: None</i>
    <br>
     Sampling rate in Hertz. If not provided, model-dependent default is used. <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>segment_bins</b> (map)
    <i>default: {}</i>
    <br>
    
    
    
    </p>
    

  
    <p class="tab30">
    <b>segment_size</b> (int)
    <i>default: 240</i>
    <br>
     Size of the segment to capture. A segment is the sum of the pre- and post-trigger samples that are to be acquired. <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>serial</b> (['null', 'string'])
    <i>default: None</i>
    <br>
     Serial number for the particular device represented by the daemon <br> 
    
      <i>from <a href='../../traits/is-daemon'>is-daemon</a></i>
    
    
    </p>
    

  
    <p class="tab30">
    <b>time_stamp_clock</b> (enum)
    <i>default: Fixed</i>
    <br>
     The time-stamping clock may operate in one of two modes. In fixed mode, the on-board oscillator will be used as the counter source. In sample mode, a frequency derived from the sampling clock will be used as the counter source. <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>time_stamp_mode</b> (enum)
    <i>default: Free</i>
    <br>
     The time-stamping counter may be reset upon the start of each acquisition or left free-running. <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>trigger_delay</b> (int)
    <i>default: 0</i>
    <br>
     Number of samples to acquire between the occurance of the trigger event and the actual logging of the trigger event. By using this you can more easily capture signals far away from the trigger. Not all CompuScope models support TriggerDelay. <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>trigger_hold_off</b> (int)
    <i>default: 0</i>
    <br>
     Number of samples during which trigger events will be ignored after the system begins capturing. This is useful for ensuring the accumulation of a specified amount of pre-trigger data. <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>trigger_time_out</b> (int)
    <i>default: 1000000</i>
    <br>
     Trigger timeout of the CompuScope system. The value is in 100 nanosecond units of time (e.g. a value of 10,000,000 gives a trigger timeout of 1 second). A value of -1 will cause the driver to wait indefinitely for a trigger. <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>triggers</b> (array)
    <i>default: []</i>
    <br>
    
    
    
    </p>
    




<h2 id='state'>state<a href='#state'> ¶</a></h2>
<p>
  The gage-chopping daemon will provide the following state information:
</p>

  
    <p class="tab30">
    <b>edge_width_count</b> (int) <br>
     Width of edges in segment count. <br> 
    
    </p>
    

  
    <p class="tab30">
    <b>record_count</b> (int) <br>
     Number of shots to collect and firmware-average. <br> 
    
    </p>
    

  
    <p class="tab30">
    <b>segment_count</b> (int) <br>
     Number of times to acquire record_count. <br> 
    
    </p>
    




<h2 id='messages'>messages<a href='#messages'> ¶</a></h2>
<p>
  The gage-chopping daemon will expose the following public messages:
</p>

  
    <p class="tab30">
    <b>busy</b>
     ➜  boolean 
    <br>
     Returns true if daemon is currently busy. <br> 
    
    <i>from <a href='../../traits/is-daemon'>is-daemon</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_channel_names</b>
     ➜  {'items': 'string', 'type': 'array'} 
    <br>
     Get current channel names. <br> 
    
    <i>from <a href='../../traits/is-sensor'>is-sensor</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_channel_shapes</b>
     ➜  {'type': 'map', 'values': {'items': 'int', 'type': 'array'}} 
    <br>
     Get current channel shapes. If list is empty, channel is scalar. <br> 
    
    <i>from <a href='../../traits/is-sensor'>is-sensor</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_channel_units</b>
     ➜  {'type': 'map', 'values': ['null', 'string']} 
    <br>
     Get current channel units. <br> 
    
    <i>from <a href='../../traits/is-sensor'>is-sensor</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_config</b>
     ➜  string 
    <br>
     Full configuration for the individual daemon as defined in the TOML file.
This includes defaults and shared settings not directly specified in the daemon-specific TOML table.
 <br> 
    
    <i>from <a href='../../traits/is-daemon'>is-daemon</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_config_filepath</b>
     ➜  string 
    <br>
     String representing the absolute filepath of the configuration file on the host machine.
 <br> 
    
    <i>from <a href='../../traits/is-daemon'>is-daemon</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_edge_width_count</b>
     ➜  int 
    <br>
     Get edge width count. <br> 
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_measured</b>
     ➜  {'type': 'map', 'values': ['int', 'double', 'ndarray']} 
    <br>
     Returns map of channel_name to measured_value. Always returns additional key measurement_id. <br> 
    
    <i>from <a href='../../traits/is-sensor'>is-sensor</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_measured_samples</b>
     ➜  {'type': 'map', 'values': 'ndarray'} 
    <br>
     Get a dictionary of 1D arrays of measured samples. <br> 
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_measured_segments</b>
     ➜  {'type': 'map', 'values': 'ndarray'} 
    <br>
     Get a dictionary of 1D arrays of measured segments. <br> 
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_measurement_id</b>
     ➜  {'type': 'int'} 
    <br>
     Get current measurement_id. Clients are encouraged to watch for this to be updated before calling get_measured to get entire measurement. <br> 
    
    <i>from <a href='../../traits/is-sensor'>is-sensor</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_record_count</b>
     ➜  int 
    <br>
     Get record count. <br> 
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_segment_count</b>
     ➜  int 
    <br>
     Get the currently planned number of chunks. <br> 
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_segment_count_limits</b>
     ➜  {'items': 'int', 'type': 'array'} 
    <br>
     Get current segment count limits as defined by on-board memory. <br> 
    
     </p>
    
    

  
    <p class="tab30">
    <b>get_state</b>
     ➜  string 
    <br>
     Get version of the running daemon <br> 
    
    <i>from <a href='../../traits/is-daemon'>is-daemon</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>id</b>
     ➜  {'type': 'map', 'values': ['null', 'string']} 
    <br>
     JSON object with information to identify the daemon, including name, kind, make, model, serial.
 <br> 
    
    <i>from <a href='../../traits/is-daemon'>is-daemon</a></i> <br>
    
     </p>
    
    

  
    <p class="tab30">
    <b>measure</b>
     ➜  int 
    <br>
     Initiate a measurement. Returns integer, measurement ID. <br> 
    
    <i>from <a href='../../traits/has-measure-trigger'>has-measure-trigger</a></i> <br>
    
    
    parameters: <br>
    </p>
    
    <p class="tab60">
        <b>loop</b> (boolean)
        <i>default: False</i>
        <br>
        
    </p>
    
    
    

  
    <p class="tab30">
    <b>set_edge_width_count</b>
     ➜  null 
    <br>
     Set edge width count. Setting of zero turns off edge detection. <br> 
    
    
    parameters: <br>
    </p>
    
    <p class="tab60">
        <b>count</b> (int)
        
        <br>
        
    </p>
    
    
    

  
    <p class="tab30">
    <b>set_record_count</b>
     ➜  null 
    <br>
     Set record count. <br> 
    
    
    parameters: <br>
    </p>
    
    <p class="tab60">
        <b>count</b> (int)
        
        <br>
        
    </p>
    
    
    

  
    <p class="tab30">
    <b>set_segment_count</b>
     ➜  null 
    <br>
     Set the chunk count. <br> 
    
    
    parameters: <br>
    </p>
    
    <p class="tab60">
        <b>count</b> (int)
        
        <br>
        
    </p>
    
    
    

  
    <p class="tab30">
    <b>shutdown</b>
     ➜  null 
    <br>
     Cleanly shutdown (or restart) daemon. <br> 
    
    <i>from <a href='../../traits/is-daemon'>is-daemon</a></i> <br>
    
    
    parameters: <br>
    </p>
    
    <p class="tab60">
        <b>restart</b> (boolean)
        <i>default: False</i>
        <br>
        
    </p>
    
    
    

  
    <p class="tab30">
    <b>stop_looping</b>
     ➜  null 
    <br>
     Stop looping measurement. <br> 
    
    <i>from <a href='../../traits/has-measure-trigger'>has-measure-trigger</a></i> <br>
    
     </p>
    
    




<h2 id='types'>types<a href='#types'> ¶</a></h2>
<p>
  The gage-chopping daemon uses the following avro types:
</p>

  
    <p class="tab30">
    <b>coupling_mode</b> (enum) <br>
     default: DC <br> 
    
     symbols: ['AC', 'DC'] <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>impedance_mode</b> (enum) <br>
     default: fifty <br> 
    
     symbols: ['fifty', 'onemeg'] <br> 
    
    
    </p>
    

  
    <p class="tab30">
    <b>channel</b> (record) <br>
    
    
    
    
    fields: <br>
        
        <p class="tab60">
        <b>range</b> (int)
        
        <br>
         Full input range in millivolts. <br> 
        </p>
        
        <p class="tab60">
        <b>coupling</b> (coupling_mode)
        
        <br>
        
        </p>
        
        <p class="tab60">
        <b>impedance</b> (impedance_mode)
        
        <br>
        
        </p>
        
        <p class="tab60">
        <b>diff_input</b> (boolean)
        <i>default: False</i>
        <br>
         Enable differential input coupling. Not all CompuScope models support differential input coupling. <br> 
        </p>
        
        <p class="tab60">
        <b>direct_adc</b> (boolean)
        <i>default: False</i>
        <br>
         Enable direct-to-ADC input coupling. Not all CompuScope models support direct-to-ADC input coupling. <br> 
        </p>
        
        <p class="tab60">
        <b>filter</b> (boolean)
        <i>default: False</i>
        <br>
         Enable low-pass filtering. Not all CopuScope models support low-pass filtering. <br> 
        </p>
        
        <p class="tab60">
        <b>dc_offset</b> (int)
        <i>default: 0</i>
        <br>
         DC offset for this channel in millivolts. Can be negative or positive. <br> 
        </p>
        
        <p class="tab60">
        <b>signal_start_index</b> (int)
        <i>default: 0</i>
        <br>
         Start index for signal region in post-processing. NumPy style indexing. <br> 
        </p>
        
        <p class="tab60">
        <b>signal_stop_index</b> (int)
        <i>default: -1</i>
        <br>
         Stop index for signal region in post-processing. Numpy style indexing. <br> 
        </p>
        
        <p class="tab60">
        <b>baseline_start_index</b> (['null', 'int'])
        <i>default: None</i>
        <br>
         Start index for baseline region in post-processing. NumPy style indexing. <br> 
        </p>
        
        <p class="tab60">
        <b>baseline_stop_index</b> (['null', 'int'])
        <i>default: None</i>
        <br>
         Stop index for baseline region in post-processing. Numpy style indexing. <br> 
        </p>
        
        <p class="tab60">
        <b>use_baseline</b> (boolean)
        <i>default: False</i>
        <br>
         Enable baseline subtraction for post-processing. <br> 
        </p>
        
        <p class="tab60">
        <b>invert</b> (boolean)
        <i>default: False</i>
        <br>
         If true, post-processed signal is inverted. <br> 
        </p>
        
    
    
    </p>
    

  
    <p class="tab30">
    <b>trigger</b> (record) <br>
    
    
    
    
    fields: <br>
        
        <p class="tab60">
        <b>range</b> (int)
        
        <br>
         Full input range in millivolts. <br> 
        </p>
        
        <p class="tab60">
        <b>condition</b> (int)
        
        <br>
         Trigger condition. Refer to the CompuScope documentation for valid values. <br> 
        </p>
        
        <p class="tab60">
        <b>level</b> (float)
        <i>default: 0.0</i>
        <br>
         Trigger level as a perentage of the input range of the trigger source (half the full scale input range). For example, in the 2000 mV range at 0 DC offset, 50 would be positive 50% of 1 Volt, or 500 millivolts. <br> 
        </p>
        
        <p class="tab60">
        <b>source</b> (int)
        
        <br>
         Trigger source. Refer to the CompuScope documentation for valid values. <br> 
        </p>
        
        <p class="tab60">
        <b>coupling</b> (coupling_mode)
        
        <br>
        
        </p>
        
        <p class="tab60">
        <b>impedance</b> (impedance_mode)
        
        <br>
        
        </p>
        
    
    
    </p>
    

  
    <p class="tab30">
    <b>voltage_range</b> (record) <br>
    
    
    
    
    fields: <br>
        
        <p class="tab60">
        <b>min</b> (double)
        
        <br>
        
        </p>
        
        <p class="tab60">
        <b>max</b> (double)
        
        <br>
        
        </p>
        
    
    
    </p>
    



<hr>

<p>
built 2023-01-28 01:46:23
                                    
<a href="https://creativecommons.org/publicdomain/zero/1.0/">CC0</a>: no copyright
</p>

</body>
</html>